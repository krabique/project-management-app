<% unless @project.documents.empty? %>
  <h3 class="text-center">This project's documents</h3>
  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th>representation</th>
        <th>title</th>
        <th>created by</th>
        <th>last update by</th>
        <th>controls</th>
      </tr>
    </thead>
    <tbody>
      <% @project.documents.each do |document| %>
        <tr>
          <td class="document-representation">
            <% if is_image_path?(document.cloudinary_uri) %>
              <%= link_to cl_image_tag(document.cloudinary_uri, :crop => :fill, 
                :width => 120, :height => 80), 
                link_to_cloudinary(document.cloudinary_uri), 
                target: "_blank" %>
            <% elsif current_user.dark_style %>
              <%= link_to image_tag('documents/default_dark.png', 
                :width => 80, :height => 80), 
                link_to_cloudinary(document.cloudinary_uri), 
                target: "_blank" %>
            <% else %>
              <%= link_to image_tag('documents/default.png', 
                :width => 80, :height => 80), 
                link_to_cloudinary(document.cloudinary_uri), 
                target: "_blank" %>
            <% end %>
          </td>
          <td>
            <%= link_to document.title, 
              link_to_cloudinary(document.cloudinary_uri), 
              target: "_blank" %>
          </td>
          <td>
            <% unless document.creator <= 0 %>
              <%= link_to @users.find_by_id(document.creator).name, 
                @users.find_by_id(document.creator) %>
            <% else %>
              Unknown
            <% end %>
             at <%= document.created_at %>
          </td>
          <td>
            <% unless document.last_editor.nil? %>
              <%= link_to @users.find_by_id(document.last_editor).name, 
                @users.find_by_id(document.last_editor) %> 
              at <%= document.updated_at %>
            <% else %>
              -
            <% end %>
          </td>
          <td>
            <ul class="documents-controls">
              <li><%= link_to 'Edit', edit_project_document_path(@project, document) %></li>
              <li><%= link_to 'Delete', project_document_path(@project, document), method: :delete, data: 
                                      { confirm: 'Are you sure?' } %></li>
            </ul>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <h4 class="text-center">Someone stole this project's documents!</h4>
<% end %>
<% if current_user.projects.find_by_id(@project.id) || 
      current_user.manager_role %>
  <%= link_to 'New document', new_project_document_path(@project) %>
<% end %>