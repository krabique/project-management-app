<h1><%= @project.title %></h1>

<p>
  <%= @project.description %>
</p>

<p>
  Tags: <%= tag_links_for_project(@project) %>
</p>

<% if current_user.superadmin_role? || current_user.manager_role? %>
  <p>
    <strong>the condition here is:</strong> if current_user.superadmin_role? || 
      current_user.manager_role?
  </p>
<% end %>

<% if can? :manage, User %>
  <p>
	  <strong>the condition here is:</strong> if can? :manage, User
	</p>
<% end %>

<% if can? :manage, Project %>
  <p>
	  <strong>the condition here is:</strong> if can? :manage, Project
	</p>
<% end %>

<%= link_to 'Edit', edit_project_path(@project) %>

<% if current_user.projects.find_by_id(@project.id) %>
  <p>
	  <strong>the condition here is:</strong> 
	  current_user.project_id == @project.id
	  <p><em>Only Harry Potter can see this, 'cause he's a wizard!</em></p>
	</p>
<% end %>

<% unless @project.users.empty? %>
  <h3 class="text-center">This project's developers</h3>
  <div class="list-group projects-list">
    <% @project.users.each do |user| %>
      <div class="list-group-item">
        <%= image_tag(user.avatar.url(:thumb), 
          :class => "user-thumb-image user-list") %>
        <%= link_to(user.name, user) %>
      </div>
    <% end %>
  </div>
<% else %>
  <h4 class="text-center">Everyone hates this project, 
    so it has no developers...</h4>
<% end %>

<%= link_to 'Back to all projects', projects_path %>
<% unless @project.documents.empty? %>
  <h3 class="text-center">This project's documents</h3>
  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th>representation</th>
        <th>title</th>
        <th>created by</th>
        <th>last update by</th>
        <th>controls</th>
      </tr>
    </thead>
    <tbody>
      <% @project.documents.each do |document| %>
        <tr>
          <td><%= cl_image_tag(document.cloudinary_uri, :crop => :fill, :width => 120,
            :height => 80) %></td>
          <td><%= link_to 'some_title', link_to_cloudinary(document.cloudinary_uri), target: "_blank" %></td>
          <td>
            <% unless document.creator <= 0 %>
              <%= document.creator %>
            <% else %>
              Unknown
            <% end %>
             at <%= document.created_at %>
          </td>
          <td>
            <% unless document.last_editor.nil? %>
              <%= document.last_editor %> at <%= document.updated_at %>
            <% else %>
              -
            <% end %>
          </td>
          <td>
            <ul class="documents-controls">
              <li>Edit</li>
              <li>Delete</li>
            </ul>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <h4 class="text-center">Someone stole this project's documents!</h4>
<% end %>


    
      
